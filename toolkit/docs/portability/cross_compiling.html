<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Cross-compiling &#8212; Roc Toolkit 0.3.0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css?v=601dbdee" />
    <link rel="stylesheet" type="text/css" href="../_static/roc.css?v=37117d08" />
    <script src="../_static/documentation_options.js?v=e259d695"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/analytics.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Android environment" href="android_environment.html" />
    <link rel="prev" title="Tested devices" href="tested_devices.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="android_environment.html" title="Android environment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tested_devices.html" title="Tested devices"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Roc Toolkit 0.3.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../portability.html" accesskey="U">Portability</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Cross-compiling</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="cross-compiling">
<h1>Cross-compiling<a class="headerlink" href="#cross-compiling" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of contents:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#preparing-environment" id="id5">Preparing environment</a></p></li>
<li><p><a class="reference internal" href="#scons-options" id="id6">SCons options</a></p></li>
<li><p><a class="reference internal" href="#arm-com-linaro-armv8-a-64-bit-toolchain" id="id7">Arm.com / Linaro ARMv8-A 64-bit toolchain</a></p></li>
<li><p><a class="reference internal" href="#arm-com-linaro-armv7-a-32-bit-toolchain" id="id8">Arm.com / Linaro ARMv7-A 32-bit toolchain</a></p></li>
<li><p><a class="reference internal" href="#raspberry-pi-armv6-bcm-2708-toolchain" id="id9">Raspberry Pi ARMv6 BCM-2708 toolchain</a></p></li>
<li><p><a class="reference internal" href="#debian-and-ubuntu-toolchains" id="id10">Debian and Ubuntu toolchains</a></p></li>
<li><p><a class="reference internal" href="#android-ndk-toolchains" id="id11">Android NDK toolchains</a></p></li>
<li><p><a class="reference internal" href="#android-docker-image" id="id12">Android Docker image</a></p></li>
<li><p><a class="reference internal" href="#running-cross-compiled-binaries-on-target" id="id13">Running cross-compiled binaries on target</a></p></li>
<li><p><a class="reference internal" href="#running-cross-compiled-tests-in-qemu" id="id14">Running cross-compiled tests in QEMU</a></p></li>
</ul>
</nav>
<section id="preparing-environment">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Preparing environment</a><a class="headerlink" href="#preparing-environment" title="Link to this heading">¶</a></h2>
<p>Cross-compiling environment includes three things:</p>
<ul class="simple">
<li><p>toolchain</p></li>
<li><p>sysroot</p></li>
<li><p>dependencies</p></li>
</ul>
<p>Toolchain is a set of build tools, including compiler, linker, etc. Sysroot is a directory that contains a subset of the root filesystem of the target operating system. Target system headers, libraries and run-time object files will be searched for in there. Sysroot path is configured when building toolchain. Typically, sysroot is located in the toolchain directory.</p>
<p>You can build toolchain manually or use one of the prebuilt toolchains described below. You can cross-compile dependencies manually and install them into sysroot. Alternatively, you can let Roc to download and cross-compile dependencies automatically. In this case, dependencies are not installed into the sysroot.</p>
<p>If you want to build toolchain and dependencies manually, you can use tools like <a class="reference external" href="http://crosstool-ng.github.io/">crosstool-ng</a>, <a class="reference external" href="https://buildroot.org/">buildroot</a>, and <a class="reference external" href="https://wiki.gentoo.org/wiki/Cross_build_environment">crossdev</a>.</p>
</section>
<section id="scons-options">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">SCons options</a><a class="headerlink" href="#scons-options" title="Link to this heading">¶</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">--host</span></code> option to specify the toolchain name. This option defines a prefix which is added to all build tools, which should be available in PATH. For example, <code class="docutils literal notranslate"><span class="pre">--host=arm-linux-gnueabihf</span></code> means that Roc will expect that <code class="docutils literal notranslate"><span class="pre">arm-linux-gnueabihf-gcc</span></code>, <code class="docutils literal notranslate"><span class="pre">arm-linux-gnueabihf-ld</span></code>, etc. are available in PATH.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">--build-3rdparty</span></code> option to let Roc to download and build dependencies. When it is used with <code class="docutils literal notranslate"><span class="pre">--host</span></code>, Roc automatically uses the specified toolchain for dependencies.</p>
<p>If necessary, you can override build tool names and options by setting variables like <code class="docutils literal notranslate"><span class="pre">CC</span></code> and <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code>.</p>
<p>See <a class="reference internal" href="../building/scons_options.html"><span class="doc">SCons options</span></a> page for the full list of options and variables.</p>
</section>
<section id="arm-com-linaro-armv8-a-64-bit-toolchain">
<span id="aarch64-linux-gnu"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">Arm.com / Linaro ARMv8-A 64-bit toolchain</a><a class="headerlink" href="#arm-com-linaro-armv8-a-64-bit-toolchain" title="Link to this heading">¶</a></h2>
<p>Arm Developer Hub and Linaro project provide several <a class="reference external" href="https://www.linaro.org/downloads/">toolchains</a> for different architectures and GCC versions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">aarch64-linux-gnu</span></code> is a 64-bit ARMv8-A little-endian toolchain. It can be used with 64-bit ARMv8 boards, including 64-bit Raspberry Pi and Orange Pi models. It <em>can’t</em> be used with ARMv6, ARMv7, and 32-bit ARMv8 boards, or 64-bit ARMv8 boards running 32-bit kernel.</p>
<p>Here is how you can build Roc with this toolchain using <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-aarch64-linux-gnu/">rocstreaming/toolchain-aarch64-linux-gnu</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-aarch64-linux-gnu \
      scons \
        --host=aarch64-linux-gnu \
        --build-3rdparty=all
</pre></div>
</div>
<p>Alternatively, you can install the toolchain manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># setup directories
$ TOOLCHAIN_DIR=/path/to/toolchain
$ ROC_DIR=/path/to/roc

# for Roc
$ apt-get install g++ scons ragel gengetopt

# for 3rd-parties
$ apt-get install libtool autoconf automake make cmake

# download toolchain
$ wget http://releases.linaro.org/components/toolchain/binaries/7.4-2019.02/aarch64-linux-gnu/gcc-linaro-7.4.1-2019.02-x86_64_aarch64-linux-gnu.tar.xz
$ tar -C &quot;${TOOLCHAIN_DIR}&quot; -Jf gcc-linaro-7.4.1-2019.02-x86_64_aarch64-linux-gnu.tar.xz
$ export PATH=&quot;${TOOLCHAIN_DIR}/gcc-linaro-7.4.1-2019.02-x86_64_aarch64-linux-gnu/bin:${PATH}&quot;

# build Roc
$ cd &quot;${ROC_DIR}&quot;
$ scons --host=aarch64-linux-gnu --build-3rdparty=all
</pre></div>
</div>
</section>
<section id="arm-com-linaro-armv7-a-32-bit-toolchain">
<span id="arm-linux-gnueabihf"></span><h2><a class="toc-backref" href="#id8" role="doc-backlink">Arm.com / Linaro ARMv7-A 32-bit toolchain</a><a class="headerlink" href="#arm-com-linaro-armv7-a-32-bit-toolchain" title="Link to this heading">¶</a></h2>
<p>Arm Developer Hub and Linaro project provide several <a class="reference external" href="https://www.linaro.org/downloads/">toolchains</a> for different architectures and GCC versions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">arm-linux-gnueabihf</span></code> is a 32-bit ARMv7-A hard-float little-endian toolchain. It can be used with ARMv7 boards, including 32-bit Raspberry Pi and Orange Pi models. It also can be used with 32-bit and 64-bit ARMv8 boards running 32-bit kernels. It <em>can’t</em> be used with ARMv6 boards, e.g. Raspberry Pi 1 or Raspberry Pi Zero.</p>
<p>Here is how you can build Roc with this toolchain using <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-arm-linux-gnueabihf/">rocstreaming/toolchain-arm-linux-gnueabihf</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-arm-linux-gnueabihf \
      scons \
        --host=arm-linux-gnueabihf \
        --build-3rdparty=all
</pre></div>
</div>
<p>Alternatively, you can install the toolchain manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># setup directories
$ TOOLCHAIN_DIR=/path/to/toolchain
$ ROC_DIR=/path/to/roc

# for Roc
$ apt-get install g++ scons ragel gengetopt

# for 3rd-parties
$ apt-get install libtool autoconf automake make cmake

# download toolchain
$ wget http://releases.linaro.org/components/toolchain/binaries/4.9-2016.02/arm-linux-gnueabihf/gcc-linaro-4.9-2016.02-x86_64_arm-linux-gnueabihf.tar.xz
$ tar -C &quot;${TOOLCHAIN_DIR}&quot; -Jf gcc-linaro-4.9-2016.02-x86_64_arm-linux-gnueabihf.tar.xz
$ export PATH=&quot;${TOOLCHAIN_DIR}/gcc-linaro-4.9-2016.02-x86_64_arm-linux-gnueabihf/bin:${PATH}&quot;

# build Roc
$ cd &quot;${ROC_DIR}&quot;
$ scons --host=arm-linux-gnueabihf --build-3rdparty=all
</pre></div>
</div>
</section>
<section id="raspberry-pi-armv6-bcm-2708-toolchain">
<span id="arm-bcm2708hardfp-linux-gnueabi"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">Raspberry Pi ARMv6 BCM-2708 toolchain</a><a class="headerlink" href="#raspberry-pi-armv6-bcm-2708-toolchain" title="Link to this heading">¶</a></h2>
<p>The official Raspberry Pi <a class="reference external" href="https://github.com/raspberrypi/tools">tools</a> repository contains several arm-bcm2708 prebuilt toolchains. BCM-2708 is a chip family which includes BCM-2835, BCM-2836, and BCM-2837 chips used in various Raspberry Pi models (see <a class="reference external" href="https://elinux.org/RPi_Hardware">RPi Hardware</a>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">arm-bcm2708hardfp-linux-gnueabi</span></code> is a 32-bit ARMv6 hard-float toolchain. It can be used with ARMv6 BCM-2708 boards, including Raspberry Pi 1 and Raspberry Pi Zero. It also can be used with ARMv7 and 32-bit ARMv8 boards, including more recent Raspberry Pi models, since they are backwards-compatible, but but can’t employ instructions specific for these architectures.</p>
<p>Here is how you can build Roc with this toolchain using <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-arm-bcm2708hardfp-linux-gnueabi/">rocstreaming/toolchain-arm-bcm2708hardfp-linux-gnueabi</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-arm-bcm2708hardfp-linux-gnueabi \
      scons \
        --host=arm-bcm2708hardfp-linux-gnueabi \
        --build-3rdparty=all
</pre></div>
</div>
<p>Alternatively, you can install the toolchain manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># setup directories
$ RPI_TOOLS_DIR=/path/to/toolchain
$ ROC_DIR=/path/to/roc

# for Roc
$ apt-get install g++ scons ragel gengetopt

# for 3rd-parties
$ apt-get install libtool intltool autoconf automake make cmake

# for toolchain
$ dpkg --add-architecture i386
$ apt-get update
$ apt-get install -y libstdc++6:i386 libgcc1:i386 zlib1g:i386

# install toolchain
$ git clone https://github.com/raspberrypi/tools.git &quot;${RPI_TOOLS_DIR}&quot;
$ export PATH=&quot;${RPI_TOOLS_DIR}/arm-bcm2708/arm-bcm2708hardfp-linux-gnueabi/bin:${PATH}&quot;

# build Roc
$ cd &quot;${ROC_DIR}&quot;
$ scons --host=arm-bcm2708hardfp-linux-gnueabi --build-3rdparty=all
</pre></div>
</div>
</section>
<section id="debian-and-ubuntu-toolchains">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Debian and Ubuntu toolchains</a><a class="headerlink" href="#debian-and-ubuntu-toolchains" title="Link to this heading">¶</a></h2>
<p>Debian and Ubuntu provide packaged toolchains as well, described on the <a class="reference external" href="https://wiki.debian.org/CrossToolchains">CrossToolchains</a> page on Debian wiki.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">arm-linux-gnueabihf</span></code> toolchain can be used with ARMv7 boards. However note that the resulting binaries will require recent Glibc and, for instance, won’t run on Raspbian versions which have more outdated one.</p>
<p>Here is how you can build Roc with this toolchain on Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># enable armhf architecture
$ dpkg --add-architecture armhf

# add armhf sources (replace &quot;trusty&quot; with your distro release name)
$ cat &gt;&gt; /etc/apt/sources.list
deb [arch=armhf] http://ports.ubuntu.com/ubuntu-ports trusty-updates main restricted universe multiverse
deb [arch=armhf] http://ports.ubuntu.com/ubuntu-ports trusty-security main restricted universe multiverse
^D

# fetch armhf sources
$ apt-get update

# for Roc
$ apt-get install g++ scons ragel gengetopt

# for 3rd-parties
$ apt-get install libtool autoconf automake make cmake

# install toolchain
$ apt-get install crossbuild-essential-armhf

# build Roc
$ cd /path/to/roc
$ scons --host=arm-linux-gnueabihf --build-3rdparty=all
</pre></div>
</div>
</section>
<section id="android-ndk-toolchains">
<span id="aarch64-linux-android"></span><h2><a class="toc-backref" href="#id11" role="doc-backlink">Android NDK toolchains</a><a class="headerlink" href="#android-ndk-toolchains" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://developer.android.com/ndk">Android NDK</a> provides two ways to build native code for Android:</p>
<ul class="simple">
<li><p>use one of the prebuilt toolchains from Android NDK directly;</p></li>
<li><p>or prepare <a class="reference external" href="https://developer.android.com/ndk/guides/standalone_toolchain">a standalone toolchain</a> in a separate directory; the second approach is declared obsolete.</p></li>
</ul>
<p>For convenience, Roc supports both ways.</p>
<p>To build Roc for Android using a prebuilt toolchain from Android NDK, you can use <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-linux-android/">rocstreaming/toolchain-linux-android</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-linux-android \
      scons -Q \
        --disable-tools \
        --compiler=clang \
        --host=aarch64-linux-android28 \
        --build-3rdparty=libuv,openfec,speexdsp
</pre></div>
</div>
<p>Alternatively, you can install Android NDK manually and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># for Roc
$ apt-get install g++ scons ragel gengetopt

# for 3rd-parties
$ apt-get install libtool autoconf automake make cmake

# setup path
$ export PATH=&quot;/PATH_TO_NDK/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH}&quot;

# build Roc
$ cd /path/to/roc
$ scons -Q \
    --disable-tools \
    --compiler=clang \
    --host=aarch64-linux-android28 \
    --build-3rdparty=libuv,openfec,speexdsp
</pre></div>
</div>
<p>Supported <code class="docutils literal notranslate"><span class="pre">--host</span></code> values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">aarch64-linux-android&lt;API&gt;</span></code> (64-bit ARM)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">armv7a-linux-androideabi&lt;API&gt;</span></code> (32-bit ARM)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x86_64-linux-android&lt;API&gt;</span></code> (64-bit Intel)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i686-linux-android&lt;API&gt;</span></code> (32-bit Intel)</p></li>
</ul>
<p>Here <code class="docutils literal notranslate"><span class="pre">&lt;API&gt;</span></code> stands for the Android API level, e.g. 28. Each Android NDK version supports its own set of the API levels.</p>
<p>Building Roc with a standalone toolchain is similar to cross-compiling with any other toolchain:</p>
<ul class="simple">
<li><p>prepare a toolchain for desired ABI (target architecture) and API level, e.g. <code class="docutils literal notranslate"><span class="pre">aarch64-linux-android</span></code></p></li>
<li><p>add toolchain to <code class="docutils literal notranslate"><span class="pre">PATH</span></code></p></li>
<li><p>pass toolchain to scons using <code class="docutils literal notranslate"><span class="pre">--host</span></code> option, e.g. <code class="docutils literal notranslate"><span class="pre">--host=aarch64-linux-android</span></code></p></li>
</ul>
<p>Since standalone toolchains are obsolete, Roc doesn’t provide prebuilt Docker images for them.</p>
</section>
<section id="android-docker-image">
<span id="android-docker"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink">Android Docker image</a><a class="headerlink" href="#android-docker-image" title="Link to this heading">¶</a></h2>
<p>There are scripts for building Roc for Android and running tests on Android emulator. Everything is built and run inside Docker, so you don’t need to install anything on your system, besides Docker.</p>
<p>To build Roc for Android, you can just run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scripts/android_emu.sh build
</pre></div>
</div>
<p>This command will pull <code class="docutils literal notranslate"><span class="pre">rocstreaming/env-android</span></code> Docker image, install necessary Android components inside it, and build Roc. Build results will be available in <code class="docutils literal notranslate"><span class="pre">./bin</span></code>, as usual.</p>
<p>To run Roc tests on Android emulator, use <code class="docutils literal notranslate"><span class="pre">test</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scripts/android_emu.sh test
</pre></div>
</div>
<p>This command will additionally start Android emulator, and run Roc tests on it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command will automatically employ KVM-based hardware acceleration. If you’re using VirtualBox, you should temporary stop it and unload its kernel drivers, because they can’t work with KVM side-by-side. You can do it using <code class="docutils literal notranslate"><span class="pre">systemctl</span></code> command.</p>
</div>
<p>Subsequent runs will be much faster than the first one, because Docker container will remaing running in background, and downloaded Android components will be cached in Docker volume. You can remove Docker container and volume using <code class="docutils literal notranslate"><span class="pre">purge</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scripts/android_emu.sh purge
</pre></div>
</div>
<p>Here is the full list of available commands:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">build</span></code> - build code</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code> - build code and run tests</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clean</span></code> - remove build artifacts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">purge</span></code> - remove build artifacts and docker container</p></li>
</ul>
<p>You can also configure build via environment variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export API=28
$ export ABI=x86_64
$ export NDK_VERSION=21.1.6352462
$ export BUILD_TOOLS_VERSION=28.0.3
$ export CMAKE_VERSION=3.10.2.4988404

$ scripts/android_emu.sh build
</pre></div>
</div>
<p>For more details about <code class="docutils literal notranslate"><span class="pre">rocstreaming/env-android</span></code> image, see <a class="reference internal" href="android_environment.html"><span class="doc">Android environment</span></a>.</p>
</section>
<section id="running-cross-compiled-binaries-on-target">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Running cross-compiled binaries on target</a><a class="headerlink" href="#running-cross-compiled-binaries-on-target" title="Link to this heading">¶</a></h2>
<p>To run compiled binaries on the target system, you should install necessary runtime dependencies.</p>
<p>If you build Roc dependencies manually and install them into sysroot, you should also install them on the target system.</p>
<p>If you let Roc to build its dependencies automatically using <code class="docutils literal notranslate"><span class="pre">--build-3rdparty</span></code> option, most of them are statically linked into the Roc binaries, but there are still a few dependencies that are linked dynamically and so needed to be installed on the target system.</p>
<p>You can either copy their binaries from <code class="docutils literal notranslate"><span class="pre">3rdparty/&lt;toolchain&gt;/rpath</span></code> directory or obtain them some other way. If you have a package manager on the target system, you can just login on the system and install them.</p>
<p>Here are examples for Raspbian:</p>
<p>If ALSA support is enabled, install libasound:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apt-get install libasound2
</pre></div>
</div>
<p>If PulseAudio support is enabled, install libltdl and libpulse:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apt-get install libltdl7 libpulse0
</pre></div>
</div>
</section>
<section id="running-cross-compiled-tests-in-qemu">
<span id="qemu"></span><h2><a class="toc-backref" href="#id14" role="doc-backlink">Running cross-compiled tests in QEMU</a><a class="headerlink" href="#running-cross-compiled-tests-in-qemu" title="Link to this heading">¶</a></h2>
<p>Running a test on 32-bit ARMv6 CPU using <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-arm-bcm2708hardfp-linux-gnueabi/">rocstreaming/toolchain-arm-bcm2708hardfp-linux-gnueabi</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-arm-bcm2708hardfp-linux-gnueabi \
      env LD_LIBRARY_PATH=&quot;/opt/sysroot/lib:${PWD}/3rdparty/arm-bcm2708hardfp-linux-gnueabi/rpath&quot; \
        qemu-arm -L /opt/sysroot -cpu arm1176 \
          ./bin/arm-bcm2708hardfp-linux-gnueabi/roc-test-core
</pre></div>
</div>
<p>Running a test on 32-bit ARMv7 CPU using <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-arm-linux-gnueabihf/">rocstreaming/toolchain-arm-linux-gnueabihf</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-arm-linux-gnueabihf \
      env LD_LIBRARY_PATH=&quot;/opt/sysroot/lib:${PWD}/3rdparty/arm-linux-gnueabihf/rpath&quot; \
        qemu-arm -L /opt/sysroot -cpu cortex-a15 \
          ./bin/arm-linux-gnueabihf/roc-test-core
</pre></div>
</div>
<p>Running a test on 64-bit ARMv8 CPU using <a class="reference external" href="https://hub.docker.com/r/rocstreaming/toolchain-aarch64-linux-gnu/">rocstreaming/toolchain-aarch64-linux-gnu</a> Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /path/to/roc
$ docker run -t --rm -u &quot;${UID}&quot; -v &quot;${PWD}:${PWD}&quot; -w &quot;${PWD}&quot; \
    rocstreaming/toolchain-aarch64-linux-gnu \
      env LD_LIBRARY_PATH=&quot;/opt/sysroot/lib:${PWD}/3rdparty/aarch64-linux-gnu/rpath&quot; \
        qemu-aarch64 -L /opt/sysroot -cpu cortex-a53 \
          ./bin/aarch64-linux-gnu/roc-test-core
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo80.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_project.html">About project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manuals.html">Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../portability.html">Portability</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="supported_platforms.html">Supported platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="tested_devices.html">Tested devices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Cross-compiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="android_environment.html">Android environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="android_environment.html" title="Android environment"
             >next</a> |</li>
        <li class="right" >
          <a href="tested_devices.html" title="Tested devices"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Roc Toolkit 0.3.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../portability.html" >Portability</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Cross-compiling</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Roc Streaming authors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>