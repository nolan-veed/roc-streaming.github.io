<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Command-line tools &#8212; Roc Toolkit 0.3.0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css?v=601dbdee" />
    <link rel="stylesheet" type="text/css" href="../_static/roc.css?v=37117d08" />
    <script src="../_static/documentation_options.js?v=e259d695"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/analytics.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sound server modules" href="sound_server_modules.html" />
    <link rel="prev" title="Tools" href="../tools.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sound_server_modules.html" title="Sound server modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../tools.html" title="Tools"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Roc Toolkit 0.3.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../tools.html" accesskey="U">Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Command-line tools</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="command-line-tools">
<h1>Command-line tools<a class="headerlink" href="#command-line-tools" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of contents:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#building-and-installing" id="id2">Building and installing</a></p></li>
<li><p><a class="reference internal" href="#running-receiver" id="id3">Running receiver</a></p></li>
<li><p><a class="reference internal" href="#running-sender" id="id4">Running sender</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Roc provides a set of command-line tools, the most important of which are roc-recv and roc-send.</p>
<p>The roc-send tool allows to grab an audio stream from a file or an audio device like a microphone or record the system output sound and send it to a remote receiver.</p>
<p>The roc-recv tool allows to receive audio streams from a single or multiple senders, mix all streams into one, and play on an audio device or write to an audio file.</p>
</section>
<section id="building-and-installing">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Building and installing</a><a class="headerlink" href="#building-and-installing" title="Link to this heading">¶</a></h2>
<p>See our <a class="reference internal" href="../building.html"><span class="doc">Building</span></a> page for details. In particular, the <a class="reference internal" href="../building/user_cookbook.html"><span class="doc">User cookbook</span></a> page provides examples for popular distros.</p>
<p>After build, the tools can be found in the <code class="docutils literal notranslate"><span class="pre">./bin/&lt;host&gt;</span></code> directory, for example <code class="docutils literal notranslate"><span class="pre">./bin/x86_64-pc-linux-gnu</span></code>. You can either use tools from this directory or install them into the system using “scons install” command described by the link above.</p>
</section>
<section id="running-receiver">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Running receiver</a><a class="headerlink" href="#running-receiver" title="Link to this heading">¶</a></h2>
<p>See <a class="reference internal" href="../manuals/roc_recv.html"><span class="doc">roc-recv manual page</span></a> for the full list of options and some examples.</p>
<p>Here is an example of starting the receiver that listens on all interfaces on two UDP ports 10001 (for source packets) and 10002 (for repair packets) and plays the received audio on the default audio device.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ roc-recv -vv -s rtp+rs8m://0.0.0.0:10001 -r rs8m://0.0.0.0:10002 -c rtcp://0.0.0.0:10003
15:23:09.147 [6447] [dbg] roc_peer: pool: initializing: object_size=632 poison=0
15:23:09.147 [6447] [dbg] roc_peer: pool: initializing: object_size=2064 poison=0
15:23:09.147 [6447] [dbg] roc_peer: pool: initializing: object_size=4112 poison=0
15:23:09.147 [6447] [dbg] roc_peer: context: initializing
15:23:09.147 [6447] [dbg] roc_sndio: initializing pulseaudio backend
15:23:09.147 [6447] [dbg] roc_sndio: initializing sox backend
15:23:09.147 [6447] [dbg] roc_sndio: pulseaudio sink: opening sink: device=(null)
15:23:09.147 [6448] [dbg] roc_netio: event loop: starting event loop
15:23:09.148 [6449] [inf] roc_sndio: pulseaudio sink: opening stream: device=(null) n_channels=2 sample_rate=48000
15:23:09.149 [6447] [dbg] roc_audio: mixer: initializing: frame_size=640
15:23:09.149 [6447] [dbg] roc_peer: receiver peer: initializing
15:23:09.149 [6447] [dbg] roc_pipeline: receiver source: adding slot
15:23:09.149 [6449] [dbg] roc_sndio: pulseaudio sink: stream_latency=0
15:23:09.149 [6447] [dbg] roc_pipeline: receiver slot: adding source endpoint rtp+rs8m
15:23:09.149 [6448] [inf] roc_netio: udp receiver: opened port 0.0.0.0:10001
15:23:09.149 [6447] [inf] roc_peer: receiver peer: bound source interface to rtp+rs8m://0.0.0.0:10001
15:23:09.149 [6447] [dbg] roc_pipeline: receiver slot: adding repair endpoint rs8m
15:23:09.149 [6448] [inf] roc_netio: udp receiver: opened port 0.0.0.0:10002
15:23:09.149 [6447] [inf] roc_peer: receiver peer: bound repair interface to rs8m://0.0.0.0:10002
15:23:09.149 [6447] [dbg] roc_sndio: pump: starting main loop
15:23:13.898 [6447] [inf] roc_pipeline: session group: creating session: src_addr=127.0.0.1:44592 dst_addr=0.0.0.0:10001
15:23:13.898 [6447] [dbg] roc_packet: delayed reader: initializing: delay=8820
15:23:13.898 [6447] [dbg] roc_fec: openfec decoder: initializing: codec=rs m=8
15:23:13.898 [6447] [dbg] roc_audio: depacketizer: initializing: n_channels=2
15:23:13.898 [6447] [dbg] roc_audio: watchdog: initializing: max_blank_duration=96000 max_drops_duration=96000 drop_detection_window=14400
15:23:13.898 [6447] [dbg] roc_audio: resampler: initializing: window_interp=128 window_size=32 frame_size=640 channels_num=2
15:23:13.898 [6447] [dbg] roc_audio: latency monitor: initializing: target_latency=8820 in_rate=44100 out_rate=48000
15:23:13.898 [6447] [dbg] roc_packet: router: detected new stream: source=994636018 flags=0x8u
15:23:13.898 [6447] [dbg] roc_audio: depacketizer: ts=320 loss_ratio=0.00000
15:23:14.016 [6447] [dbg] roc_audio: watchdog: status: bbbbbbbbbbbbbbbbbbbb
15:23:14.036 [6447] [dbg] roc_packet: router: detected new stream: source=0 flags=0x10u
15:23:14.115 [6447] [dbg] roc_packet: delayed reader: initial queue: delay=8820 queue=9579 packets=31
15:23:14.115 [6447] [dbg] roc_packet: delayed reader: trimmed queue: delay=8820 queue=8961 packets=29
15:23:14.115 [6447] [dbg] roc_fec: fec reader: update payload size: next_esi=0 cur_size=0 new_size=1248
15:23:14.115 [6447] [dbg] roc_fec: fec reader: update source block size: cur_sblen=0 cur_rblen=0 new_sblen=20
15:23:14.115 [6447] [dbg] roc_audio: depacketizer: got first packet: zero_samples=10240
15:23:14.115 [6447] [dbg] roc_audio: latency monitor: latency=8950 target=8820 fe=1.00000 trim_fe=1.00000 adj_fe=0.91875
15:23:14.155 [6447] [dbg] roc_audio: watchdog: status: bbbbbbbbbbbb........
15:23:14.234 [6447] [dbg] roc_fec: fec reader: repair queue: dropped=10
15:23:14.234 [6447] [dbg] roc_fec: fec reader: got first packet in a block, start decoding: n_packets_before=18 sbn=47461
15:23:14.234 [6447] [dbg] roc_fec: fec reader: update repair block size: cur_sblen=20 cur_rblen=0 new_rblen=235
15:23:19.128 [6447] [dbg] roc_audio: latency monitor: latency=8776 target=8820 fe=0.99999 trim_fe=0.99999 adj_fe=0.91874
15:23:19.207 [6449] [dbg] roc_sndio: pulseaudio sink: stream_latency=26761
...
</pre></div>
</div>
</section>
<section id="running-sender">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Running sender</a><a class="headerlink" href="#running-sender" title="Link to this heading">¶</a></h2>
<p>See <a class="reference internal" href="../manuals/roc_send.html"><span class="doc">roc-send manual page</span></a> for the full list of options and some examples.</p>
<p>Here is an example of starting the sender reads audio stream from a WAV file and sends it to the receiver on 127.0.0.1 (locahost) with two UDP ports 10001 (for source packets) and 10002 (for repair packets).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ roc-send -vv -i file:./input.wav -s rtp+rs8m://127.0.0.1:10001 -r rs8m://127.0.0.1:10002 -c rtcp://127.0.0.1:10003
15:23:13.896 [6450] [dbg] roc_peer: pool: initializing: object_size=632 poison=0
15:23:13.896 [6450] [dbg] roc_peer: pool: initializing: object_size=2064 poison=0
15:23:13.896 [6450] [dbg] roc_peer: pool: initializing: object_size=4112 poison=0
15:23:13.896 [6450] [dbg] roc_peer: context: initializing
15:23:13.896 [6450] [dbg] roc_sndio: initializing pulseaudio backend
15:23:13.896 [6450] [dbg] roc_sndio: initializing sox backend
15:23:13.896 [6451] [dbg] roc_netio: event loop: starting event loop
15:23:13.896 [6450] [inf] roc_sndio: sox source: opening: driver=(null) input=./input.wav
15:23:13.896 [6450] [dbg] roc_sndio: sox: formats.c: detected file format type `wav&#39;
15:23:13.896 [6450] [inf] roc_sndio: sox source: in_bits=16 out_bits=32 in_rate=44100 out_rate=0 in_ch=2 out_ch=0 is_file=1
15:23:13.896 [6450] [dbg] roc_peer: sender peer: initializing
15:23:13.896 [6450] [inf] roc_pipeline: sender sink: adding slot
15:23:13.897 [6451] [inf] roc_netio: udp sender: opened port 0.0.0.0:44592
15:23:13.897 [6450] [inf] roc_peer: sender peer: bound source interface to 0.0.0.0:44592
15:23:13.897 [6450] [dbg] roc_pipeline: sender slot: adding source endpoint rtp+rs8m
15:23:13.897 [6450] [inf] roc_peer: sender peer: connected source interface to rtp+rs8m://127.0.0.1:10001
15:23:13.897 [6450] [inf] roc_peer: sender peer: reusing source interface port for repair interface
15:23:13.897 [6450] [dbg] roc_pipeline: sender slot: adding repair endpoint rs8m
15:23:13.897 [6450] [dbg] roc_fec: openfec encoder: initializing: codec=rs m=8
15:23:13.897 [6450] [dbg] roc_fec: fec writer: update block size: cur_sbl=0 cur_rbl=0 new_sbl=20 new_rbl=10
15:23:13.897 [6450] [dbg] roc_audio: packetizer: initializing: n_channels=2 samples_per_packet=309
15:23:13.897 [6450] [inf] roc_peer: sender peer: connected repair interface to rs8m://127.0.0.1:10002
15:23:13.897 [6450] [dbg] roc_sndio: pump: starting main loop
15:23:13.897 [6450] [dbg] roc_packet: router: detected new stream: source=994636018 flags=0x8u
15:23:14.035 [6450] [dbg] roc_packet: router: detected new stream: source=0 flags=0x10u
...
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo80.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_project.html">About project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tools.html">Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Command-line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="sound_server_modules.html">Sound server modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications.html">Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manuals.html">Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../portability.html">Portability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sound_server_modules.html" title="Sound server modules"
             >next</a> |</li>
        <li class="right" >
          <a href="../tools.html" title="Tools"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Roc Toolkit 0.3.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../tools.html" >Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Command-line tools</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Roc Streaming authors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>